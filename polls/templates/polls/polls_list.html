{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>{% if mine %}My Polls{% else %}All Polls{% endif %}</h2>
  <div>
    <a href="{% url 'polls:add' %}" class="btn btn-sm btn-primary">New Poll</a>
  </div>
</div>
<form method="get" class="form-inline mb-3">
  <input name="search" class="form-control mr-2" value="{{ search_term }}" placeholder="Search polls">
  <button class="btn btn-outline-secondary">Search</button>
</form>
{% for p in polls %}
  <div class="card mb-2">
    <div class="card-body">
      <h5 class="card-title">{{ p.text }}</h5>
      <a class="btn btn-sm btn-outline-primary" href="{% url 'polls:detail' p.id %}">Open</a>
      {% if request.user == p.owner %}
        <a class="btn btn-sm btn-outline-info" href="{% url 'polls:edit' p.id %}">Edit</a>
        <a class="btn btn-sm btn-outline-danger" href="{% url 'polls:delete' p.id %}">Delete</a>
      {% endif %}
    </div>
  </div>
{% empty %}
  <p>No polls yet.</p>
{% endfor %}
<nav>
  <ul class="pagination">
    {% if polls.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ polls.previous_page_number }}&{{ params }}">Prev</a></li>
    {% endif %}
    <li class="page-item disabled"><span class="page-link">Page {{ polls.number }} of {{ polls.paginator.num_pages }}</span></li>
    {% if polls.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ polls.next_page_number }}&{{ params }}">Next</a></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}
